<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
	<meta name="author" content="Petar">

	<title>Test Ajax JS</title>
	<script language="javascript" type="text/javascript" src="library/FreshBooks/HttpClient.js"></script>
	<script language="javascript" type="text/javascript" src="library/FreshBooks/Element.js"></script>
	<script language="javascript" type="text/javascript" src="library/FreshBooks/BaseInvoice.js"></script>
	<script language="javascript" type="text/javascript" src="library/FreshBooks/Invoice.js"></script>
	<script language="javascript" type="text/javascript" src="library/dumper.js"></script>
</head>

<body>
<script language="javascript" type="text/javascript">
//<!--
var url = 'https://rukavina.freshbooks.com/api/2.1/xml-in';
var token = '71350591f3bf5512cfd59c418b2da06d';
var proxyUrl = 'proxy.php';

var httpClient = new FreshBooks_HttpClient(url,token,proxyUrl);

function ajaxSend(){
	var responseText = "";
	var responseXML = null;
	if(httpClient.send(document.getElementById('content').value)){
		document.getElementById('response').value = httpClient.getResponseText();
		var xmlObject = httpClient.getResponseXML();
	}
	
}

function test(){
	var record = new FreshBooks_Invoice();
	var result = record.get(1);
	if(result){
		document.getElementById('response').value = dump(record);
	}
	else{
		document.getElementById('response').value = record.lastError;
	}
}
//-->
</script>

	<h1>FreshBooks API AJAX tester</h1>
	<table width="100%" cellpadding="5" cellspacing="5">
	<tr>
		<td width="50%" valign="top">
			<h2>Request</h2>
			<form method="post" name="req_form" id="req_form">
				Body:<br />
				<textarea id="content" name="content" rows="5" cols="60" style="width:400px;height:200px"></textarea>
				<img src="ajax-loader.gif" border="0" id="loader" style="display:none" />
				<input type="button" name="send" id="send" value="SUBMIT &gt;&gt;" onclick="ajaxSend();" />
			</form>
		</td>
		<td width="50%" valign="top">
			<h2>Response</h2>
			<textarea id="response" name="response" rows="5" cols="60" style="width:100%; height: 300px;"></textarea>
		</td>
	</tr>
	</table>
	<input type="button" name="test" id="test" value="TEST" onclick="test();" />
</body>
</html>